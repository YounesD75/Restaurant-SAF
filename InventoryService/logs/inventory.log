2025-12-25 13:27:38.670 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Starting InventoryServiceApplication using Java 21.0.7 with PID 35888 (/home/cytech/Restaurant-SAF/InventoryService/target/classes started by cytech in /home/cytech/Restaurant-SAF/InventoryService)
2025-12-25 13:27:38.680 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - No active profile set, falling back to 1 default profile: "default"
2025-12-25 13:27:40.352 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Starting...
2025-12-25 13:27:40.521 [restartedMain] INFO  [com.zaxxer.hikari.pool.HikariPool] [Actor:] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1b556b8c
2025-12-25 13:27:40.521 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Start completed.
2025-12-25 13:27:40.577 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - Flyway Community Edition 9.22.3 by Redgate
2025-12-25 13:27:40.577 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - See release notes here: https://rd.gt/416ObMi
2025-12-25 13:27:40.577 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - 
2025-12-25 13:27:40.585 [restartedMain] INFO  [org.flywaydb.core.FlywayExecutor] [Actor:] - Database: jdbc:postgresql://localhost:5432/inventory_db (PostgreSQL 17.7)
2025-12-25 13:27:40.590 [restartedMain] WARN  [o.f.c.i.database.base.Database] [Actor:] - Flyway upgrade recommended: PostgreSQL 17.7 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-12-25 13:27:40.606 [restartedMain] INFO  [o.f.c.i.s.JdbcTableSchemaHistory] [Actor:] - Schema history table "public"."flyway_schema_history" does not exist yet
2025-12-25 13:27:40.610 [restartedMain] INFO  [o.f.core.internal.command.DbValidate] [Actor:] - Successfully validated 2 migrations (execution time 00:00.013s)
2025-12-25 13:27:40.620 [restartedMain] INFO  [o.f.c.i.s.JdbcTableSchemaHistory] [Actor:] - Creating Schema History table "public"."flyway_schema_history" ...
2025-12-25 13:27:40.685 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Current version of schema "public": << Empty Schema >>
2025-12-25 13:27:40.696 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Migrating schema "public" to version "1 - init inventory tables"
2025-12-25 13:27:40.729 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Migrating schema "public" to version "2 - seed inventory data"
2025-12-25 13:27:40.742 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Successfully applied 2 migrations to schema "public", now at version v2 (execution time 00:00.026s)
2025-12-25 13:27:42.220 [restartedMain] INFO  [com.saf.core1.LocalActorSystem] [Actor:] - SAF ActorSystem started with 12 threads.
2025-12-25 13:27:42.231 [restartedMain] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:stock-router-397e4d34-9c82-44cf-9b4d-86eecffae27a] - Starting Router Pool with 3 initial workers.
2025-12-25 13:27:42.344 [restartedMain] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] [Actor:] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-25 13:27:43.392 [restartedMain] WARN  [o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger] [Actor:] - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-25 13:27:43.718 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Started InventoryServiceApplication in 5.357 seconds (process running for 5.791)
2025-12-25 13:31:08.646 [pool-3-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:stock-router-397e4d34-9c82-44cf-9b4d-86eecffae27a] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@5ace89f4
2025-12-25 13:31:08.648 [pool-3-thread-1] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:] - Pool size is now: 3
2025-12-25 13:31:08.649 [pool-3-thread-2] INFO  [com.saf.core1.ActorCell] [Actor:worker-0-677fd90d-b58e-4a8c-a854-453d4b014247] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@5ace89f4
2025-12-25 13:31:08.649 [pool-3-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-677fd90d-b58e-4a8c-a854-453d4b014247] - Stock check start: orderId=1766665653041 items=[com.InventoryService.InventoryService.dto.StockCheckRequest$Item@3a0007b0, com.InventoryService.InventoryService.dto.StockCheckRequest$Item@34c7fe80]
2025-12-25 13:31:08.782 [pool-3-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-677fd90d-b58e-4a8c-a854-453d4b014247] - Stock check result: orderId=1766665653041 success=true message=Stock reserved successfully
2025-12-25 13:31:08.926 [pool-3-thread-2] INFO  [c.I.I.client.InventoryCallbackClient] [Actor:worker-0-677fd90d-b58e-4a8c-a854-453d4b014247] - Callback envoyé vers http://saf-restaurant/events/stock-result pour order 1766665653041
2025-12-25 13:32:35.331 [pool-3-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@6916289c
2025-12-25 13:32:35.332 [pool-3-thread-3] INFO  [com.saf.core1.ActorCell] [Actor:worker-1-173e1bd0-3828-464a-8d30-b7d632115091] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@6916289c
2025-12-25 13:32:35.333 [pool-3-thread-3] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-1-173e1bd0-3828-464a-8d30-b7d632115091] - Stock check start: orderId=1766665653042 items=[com.InventoryService.InventoryService.dto.StockCheckRequest$Item@e05443, com.InventoryService.InventoryService.dto.StockCheckRequest$Item@e27ba2f]
2025-12-25 13:32:35.379 [pool-3-thread-3] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-1-173e1bd0-3828-464a-8d30-b7d632115091] - Stock check result: orderId=1766665653042 success=true message=Stock reserved successfully
2025-12-25 13:32:35.405 [pool-3-thread-3] INFO  [c.I.I.client.InventoryCallbackClient] [Actor:worker-1-173e1bd0-3828-464a-8d30-b7d632115091] - Callback envoyé vers http://saf-restaurant/events/stock-result pour order 1766665653042
2025-12-25 13:35:19.363 [pool-3-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:] - RECEIVED message [SYSTEM_SCALE_UP] Payload: 2
2025-12-25 13:35:19.363 [pool-3-thread-1] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:] - Scalability: Scaling UP by 2
2025-12-25 13:35:19.364 [pool-3-thread-1] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:] - Pool size is now: 5
2025-12-25 13:39:25.212 [Thread-7] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Shutdown initiated...
2025-12-25 13:39:25.225 [Thread-7] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Shutdown completed.
2025-12-25 13:39:28.345 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Starting InventoryServiceApplication using Java 21.0.7 with PID 35888 (/home/cytech/Restaurant-SAF/InventoryService/target/classes started by cytech in /home/cytech/Restaurant-SAF/InventoryService)
2025-12-25 13:39:28.345 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - No active profile set, falling back to 1 default profile: "default"
2025-12-25 13:39:28.811 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-2 - Starting...
2025-12-25 13:39:28.850 [restartedMain] INFO  [com.zaxxer.hikari.pool.HikariPool] [Actor:] - HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@767e24e6
2025-12-25 13:39:28.851 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-2 - Start completed.
2025-12-25 13:39:28.870 [restartedMain] INFO  [org.flywaydb.core.FlywayExecutor] [Actor:] - Database: jdbc:postgresql://localhost:5432/inventory_db (PostgreSQL 17.7)
2025-12-25 13:39:28.874 [restartedMain] WARN  [o.f.c.i.database.base.Database] [Actor:] - Flyway upgrade recommended: PostgreSQL 17.7 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-12-25 13:39:28.883 [restartedMain] INFO  [o.f.core.internal.command.DbValidate] [Actor:] - Successfully validated 2 migrations (execution time 00:00.006s)
2025-12-25 13:39:28.911 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Current version of schema "public": 2
2025-12-25 13:39:28.912 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Schema "public" is up to date. No migration necessary.
2025-12-25 13:39:29.344 [restartedMain] INFO  [com.saf.core1.LocalActorSystem] [Actor:] - SAF ActorSystem started with 12 threads.
2025-12-25 13:39:29.348 [restartedMain] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:stock-router-c848679d-562c-4ce1-aa4b-055269c824ee] - Starting Router Pool with 3 initial workers.
2025-12-25 13:39:29.414 [restartedMain] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] [Actor:] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-25 13:39:30.142 [restartedMain] WARN  [o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger] [Actor:] - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-25 13:39:30.216 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Started InventoryServiceApplication in 1.9 seconds (process running for 712.289)
2025-12-25 13:39:31.367 [Thread-10] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-2 - Shutdown initiated...
2025-12-25 13:39:31.383 [Thread-10] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-2 - Shutdown completed.
2025-12-25 13:39:34.475 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Starting InventoryServiceApplication using Java 21.0.7 with PID 35888 (/home/cytech/Restaurant-SAF/InventoryService/target/classes started by cytech in /home/cytech/Restaurant-SAF/InventoryService)
2025-12-25 13:39:34.476 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - No active profile set, falling back to 1 default profile: "default"
2025-12-25 13:39:34.912 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-3 - Starting...
2025-12-25 13:39:34.933 [restartedMain] INFO  [com.zaxxer.hikari.pool.HikariPool] [Actor:] - HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@5cfed144
2025-12-25 13:39:34.933 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-3 - Start completed.
2025-12-25 13:39:34.946 [restartedMain] INFO  [org.flywaydb.core.FlywayExecutor] [Actor:] - Database: jdbc:postgresql://localhost:5432/inventory_db (PostgreSQL 17.7)
2025-12-25 13:39:34.948 [restartedMain] WARN  [o.f.c.i.database.base.Database] [Actor:] - Flyway upgrade recommended: PostgreSQL 17.7 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-12-25 13:39:34.954 [restartedMain] INFO  [o.f.core.internal.command.DbValidate] [Actor:] - Successfully validated 2 migrations (execution time 00:00.003s)
2025-12-25 13:39:34.988 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Current version of schema "public": 2
2025-12-25 13:39:34.989 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Schema "public" is up to date. No migration necessary.
2025-12-25 13:39:35.380 [restartedMain] INFO  [com.saf.core1.LocalActorSystem] [Actor:] - SAF ActorSystem started with 12 threads.
2025-12-25 13:39:35.382 [restartedMain] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:stock-router-b09d9a75-8de8-42cb-9965-869b7fc69cb5] - Starting Router Pool with 3 initial workers.
2025-12-25 13:39:35.438 [restartedMain] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] [Actor:] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-25 13:39:36.088 [restartedMain] WARN  [o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger] [Actor:] - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-25 13:39:36.167 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Started InventoryServiceApplication in 1.715 seconds (process running for 718.241)
2025-12-25 13:43:45.750 [pool-12-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:stock-router-b09d9a75-8de8-42cb-9965-869b7fc69cb5] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@6415d427
2025-12-25 13:43:45.751 [pool-12-thread-1] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:] - Pool size is now: 3
2025-12-25 13:43:45.751 [pool-12-thread-2] INFO  [com.saf.core1.ActorCell] [Actor:worker-0-4b15ec51-c71d-49cb-9740-16798c3f9a3d] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@6415d427
2025-12-25 13:43:45.751 [pool-12-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-4b15ec51-c71d-49cb-9740-16798c3f9a3d] - Stock check start: orderId=1766665653043 items=[com.InventoryService.InventoryService.dto.StockCheckRequest$Item@44715b92, com.InventoryService.InventoryService.dto.StockCheckRequest$Item@4ab6bd6c]
2025-12-25 13:43:45.812 [pool-12-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-4b15ec51-c71d-49cb-9740-16798c3f9a3d] - Stock check result: orderId=1766665653043 success=true message=Stock reserved successfully
2025-12-25 13:43:45.848 [pool-12-thread-2] INFO  [c.I.I.client.InventoryCallbackClient] [Actor:worker-0-4b15ec51-c71d-49cb-9740-16798c3f9a3d] - Callback envoyé vers http://saf-restaurant/events/stock-result pour order 1766665653043
2025-12-25 13:44:40.863 [pool-12-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@1a0e0731
2025-12-25 13:44:40.864 [pool-12-thread-3] INFO  [com.saf.core1.ActorCell] [Actor:worker-1-14f489bb-6fcf-4eb5-9082-92d8176b7fd5] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@1a0e0731
2025-12-25 13:44:40.864 [pool-12-thread-3] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-1-14f489bb-6fcf-4eb5-9082-92d8176b7fd5] - Stock check start: orderId=1766665653044 items=[com.InventoryService.InventoryService.dto.StockCheckRequest$Item@57cee27a]
2025-12-25 13:44:40.873 [pool-12-thread-3] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-1-14f489bb-6fcf-4eb5-9082-92d8176b7fd5] - Stock check result: orderId=1766665653044 success=false message=Unknown dish: unknown-item
2025-12-25 13:44:40.887 [pool-12-thread-3] INFO  [c.I.I.client.InventoryCallbackClient] [Actor:worker-1-14f489bb-6fcf-4eb5-9082-92d8176b7fd5] - Callback envoyé vers http://saf-restaurant/events/stock-result pour order 1766665653044
2025-12-25 14:10:19.517 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-3 - Shutdown initiated...
2025-12-25 14:10:19.529 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-3 - Shutdown completed.
2025-12-25 14:10:19.539 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:10:19.557 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:10:19.558 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.netflix.discovery.DiscoveryClient] [Actor:] - DiscoveryClient_INVENTORY-SERVICE/student-laptop.home:inventory-service:8083 - registration failed Cannot execute request on any known server
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:828) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:125) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.InstanceInfoReplicator$2.run(InstanceInfoReplicator.java:105) ~[eureka-client-2.0.4.jar:2.0.4]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-12-25 14:10:19.569 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.discovery.InstanceInfoReplicator] [Actor:] - There was a problem with the instance info replicator
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:828) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:125) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.InstanceInfoReplicator$2.run(InstanceInfoReplicator.java:105) ~[eureka-client-2.0.4.jar:2.0.4]
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572) ~[na:na]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-12-25 14:10:19.578 [SpringApplicationShutdownHook] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on DELETE request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE/student-laptop.home:inventory-service:8083": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:10:19.579 [SpringApplicationShutdownHook] ERROR [c.netflix.discovery.DiscoveryClient] [Actor:] - DiscoveryClient_INVENTORY-SERVICE/student-laptop.home:inventory-service:8083 - de-registration failedCannot execute request on any known server
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:919) ~[eureka-client-2.0.4.jar:2.0.4]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:900) ~[eureka-client-2.0.4.jar:2.0.4]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:415) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:239) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:202) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:195) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:389) ~[spring-cloud-context-4.1.5.jar:4.1.5]
	at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:136) ~[spring-cloud-context-4.1.5.jar:4.1.5]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:587) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:559) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1202) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:520) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1195) ~[spring-beans-6.1.3.jar:6.1.3]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1183) ~[spring-context-6.1.3.jar:6.1.3]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1144) ~[spring-context-6.1.3.jar:6.1.3]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174) ~[spring-boot-3.2.2.jar:3.2.2]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1090) ~[spring-context-6.1.3.jar:6.1.3]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145) ~[spring-boot-3.2.2.jar:3.2.2]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114) ~[spring-boot-3.2.2.jar:3.2.2]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-12-25 14:10:43.771 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Starting InventoryServiceApplication using Java 21.0.7 with PID 72792 (/home/cytech/Restaurant-SAF/InventoryService/target/classes started by cytech in /home/cytech/Restaurant-SAF/InventoryService)
2025-12-25 14:10:43.775 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - No active profile set, falling back to 1 default profile: "default"
2025-12-25 14:10:51.593 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Starting...
2025-12-25 14:10:52.181 [restartedMain] INFO  [com.zaxxer.hikari.pool.HikariPool] [Actor:] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3559063e
2025-12-25 14:10:52.183 [restartedMain] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Start completed.
2025-12-25 14:10:52.454 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - Flyway Community Edition 9.22.3 by Redgate
2025-12-25 14:10:52.454 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - See release notes here: https://rd.gt/416ObMi
2025-12-25 14:10:52.454 [restartedMain] INFO  [o.f.c.i.license.VersionPrinter] [Actor:] - 
2025-12-25 14:10:52.506 [restartedMain] INFO  [org.flywaydb.core.FlywayExecutor] [Actor:] - Database: jdbc:postgresql://localhost:5432/inventory_db (PostgreSQL 17.7)
2025-12-25 14:10:52.542 [restartedMain] WARN  [o.f.c.i.database.base.Database] [Actor:] - Flyway upgrade recommended: PostgreSQL 17.7 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-12-25 14:10:52.666 [restartedMain] INFO  [o.f.core.internal.command.DbValidate] [Actor:] - Successfully validated 2 migrations (execution time 00:00.092s)
2025-12-25 14:10:52.710 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Current version of schema "public": 2
2025-12-25 14:10:52.721 [restartedMain] INFO  [o.f.core.internal.command.DbMigrate] [Actor:] - Schema "public" is up to date. No migration necessary.
2025-12-25 14:10:57.019 [restartedMain] INFO  [com.saf.core1.LocalActorSystem] [Actor:] - SAF ActorSystem started with 12 threads.
2025-12-25 14:10:57.040 [restartedMain] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:stock-router-474fa8e9-0341-44ee-aa3e-e1a1f1efcfa1] - Starting Router Pool with 3 initial workers.
2025-12-25 14:10:57.388 [restartedMain] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] [Actor:] - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-25 14:10:59.620 [restartedMain] WARN  [o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger] [Actor:] - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-25 14:11:00.252 [restartedMain] INFO  [c.I.I.InventoryServiceApplication] [Actor:] - Started InventoryServiceApplication in 18.275 seconds (process running for 19.775)
2025-12-25 14:21:09.663 [pool-3-thread-1] INFO  [com.saf.core1.ActorCell] [Actor:stock-router-474fa8e9-0341-44ee-aa3e-e1a1f1efcfa1] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@7160aae4
2025-12-25 14:21:09.669 [pool-3-thread-1] INFO  [com.saf.core1.router.RoundRobinPool] [Actor:] - Pool size is now: 3
2025-12-25 14:21:09.672 [pool-3-thread-2] INFO  [com.saf.core1.ActorCell] [Actor:worker-0-5e881185-8ce8-4fc3-9799-4d38ee639b0b] - RECEIVED message [VerifyStock] Payload: com.InventoryService.InventoryService.dto.StockCheckRequest@7160aae4
2025-12-25 14:21:09.674 [pool-3-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-5e881185-8ce8-4fc3-9799-4d38ee639b0b] - Stock check start: orderId=1766668722366 items=[com.InventoryService.InventoryService.dto.StockCheckRequest$Item@5915670b]
2025-12-25 14:21:09.869 [pool-3-thread-2] INFO  [c.I.I.actors.InventoryStockActor] [Actor:worker-0-5e881185-8ce8-4fc3-9799-4d38ee639b0b] - Stock check result: orderId=1766668722366 success=true message=Stock reserved successfully
2025-12-25 14:21:10.220 [pool-3-thread-2] INFO  [c.I.I.client.InventoryCallbackClient] [Actor:worker-0-5e881185-8ce8-4fc3-9799-4d38ee639b0b] - Callback envoyé vers http://saf-restaurant/events/stock-result pour order 1766668722366
2025-12-25 14:27:16.328 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Shutdown initiated...
2025-12-25 14:27:16.329 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:27:16.345 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] [Actor:] - HikariPool-1 - Shutdown completed.
2025-12-25 14:27:16.380 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on POST request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:27:16.380 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.netflix.discovery.DiscoveryClient] [Actor:] - DiscoveryClient_INVENTORY-SERVICE/student-laptop.home:inventory-service:8083 - registration failed Cannot execute request on any known server
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:828)
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:125)
	at com.netflix.discovery.InstanceInfoReplicator$2.run(InstanceInfoReplicator.java:105)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-25 14:27:16.390 [DiscoveryClient-InstanceInfoReplicator-%d] WARN  [c.n.discovery.InstanceInfoReplicator] [Actor:] - There was a problem with the instance info replicator
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56)
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:828)
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:125)
	at com.netflix.discovery.InstanceInfoReplicator$2.run(InstanceInfoReplicator.java:105)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-25 14:27:16.407 [SpringApplicationShutdownHook] WARN  [c.n.d.s.t.d.RetryableEurekaHttpClient] [Actor:] - Request execution failed with message: I/O error on DELETE request for "http://localhost:8761/eureka/apps/INVENTORY-SERVICE/student-laptop.home:inventory-service:8083": Connect to http://localhost:8761 [localhost/127.0.0.1] failed: Connexion refusée
2025-12-25 14:27:16.408 [SpringApplicationShutdownHook] ERROR [c.netflix.discovery.DiscoveryClient] [Actor:] - DiscoveryClient_INVENTORY-SERVICE/student-laptop.home:inventory-service:8083 - de-registration failedCannot execute request on any known server
com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74)
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:76)
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71)
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:919)
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:900)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:415)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:239)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:202)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.run(DisposableBeanAdapter.java:195)
	at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.destroy(GenericScope.java:389)
	at org.springframework.cloud.context.scope.GenericScope.destroy(GenericScope.java:136)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:587)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:559)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1202)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:520)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1195)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1183)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1144)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1090)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:145)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:114)
	at java.base/java.lang.Thread.run(Thread.java:1583)
